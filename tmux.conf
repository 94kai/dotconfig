# -----------------------------------------------------------------------------
# Tmux 基本配置 - 要求 Tmux >= 2.3
# 如果不想使用插件，只需要将此节的内容写入 ~/.tmux.conf 即可
# -----------------------------------------------------------------------------
# 设置esc的等待时间，太长会导致vim中按下esc后停顿一下
set-option -sg escape-time 10
# C-b 和 VIM 冲突，修改 Prefix 组合键为 Control-s，按键距离近
set -g prefix C-s

set -g base-index         1     # 窗口编号从 1 开始计数
set -g display-panes-time 10000 # PREFIX-Q 显示编号的驻留时长，单位 ms
set -g mouse              on    # 开启鼠标
set -g pane-base-index    1     # 窗格编号从 1 开始计数
set -g renumber-windows   on    # 关掉某个窗口后，编号重排

setw -g allow-rename      off   # 禁止活动进程修改窗口名
setw -g automatic-rename  off   # 禁止自动命名新窗口
setw -g mode-keys         vi    # 进入复制模式的时候使用 vi 键位（默认是 EMACS）


bind c new-window -c "#{pane_current_path}"
bind = split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# -----------------------------------------------------------------------------
# 使用插件 - via tpm
# git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
# C-s + I 安装插件
# -----------------------------------------------------------------------------

# 推荐的插件（请去每个插件的仓库下读一读使用教程）
set -g @plugin 'seebi/tmux-colors-solarized'
set -g @plugin 'tmux-plugins/tmux-yank'

# 类似easymotion
set -g @plugin 'schasse/tmux-jump'

# 快速copy文件、git hash、颜色等
set -g @plugin 'abhinav/tmux-fastcopy'
set-option -g set-clipboard on
set-option -g @fastcopy-action 'tmux load-buffer -w -'
set-option -g @fastcopy-action pbcopy

# 设置主题catppuccin/tmux
tmux_active_color="#A2D18D"
tmux_un_active_color="#303030"
set -g @plugin 'catppuccin/tmux'
set -g @catppuccin_flavour 'mocha' #'latte'  or frappe, macchiato, mocha
set -g @catppuccin_window_separator " "
set -g @catppuccin_window_left_separator ""
set -g @catppuccin_window_middle_separator " "
set -g @catppuccin_window_right_separator ""
set -g @catppuccin_window_number_position "left"
set -g @catppuccin_window_status_enable "yes"
set -g @catppuccin_window_status_icon_enable "yes"
set -g @catppuccin_icon_window_last "*"
# 以下代码需要修改到~/.tmux/plugins/tmux/builder/window_builder.sh
# window_status_icon_enable=$(get_tmux_option "@catppuccin_window_status_icon_enable" "yes")
# custom_icon_window_last=$(get_tmux_option "@catppuccin_icon_window_last" "󰖰 ")
# custom_icon_window_current=$(get_tmux_option "@catppuccin_icon_window_current" "")
# custom_icon_window_zoom=$(get_tmux_option "@catppuccin_icon_window_zoom" "󰁌 ")
# custom_icon_window_mark=$(get_tmux_option "@catppuccin_icon_window_mark" "󰃀 ")
# custom_icon_window_silent=$(get_tmux_option "@catppuccin_icon_window_silent" "󰂛 ")
# custom_icon_window_activity=$(get_tmux_option "@catppuccin_icon_window_activity" "󱅫 ")
# custom_icon_window_bell=$(get_tmux_option "@catppuccin_icon_window_bell" "󰂞 ")
#
# if [ "$window_status_icon_enable" = "yes" ]; then
#   # #!~[*-]MZ
#   local show_window_status=" "
#   show_window_status+="#{?window_activity_flag,${custom_icon_window_activity},}"
#   show_window_status+="#{?window_bell_flag,${custom_icon_window_bell},}"
#   show_window_status+="#{?window_silence_flag,${custom_icon_window_silent},}"
#   show_window_status+="#{?window_active,${custom_icon_window_current},}"
#   show_window_status+="#{?window_last_flag,${custom_icon_window_last},}"
#   show_window_status+="#{?window_marked_flag,${custom_icon_window_mark},}"
#   show_window_status+="#{?window_zoomed_flag,${custom_icon_window_zoom},}"
#
# fi
set -g @catppuccin_window_default_fill "all"
set -g @catppuccin_window_current_fill "all"
set -g @catppuccin_window_current_color $tmux_active_color # text color
set -g @catppuccin_window_current_background "black"
set -g @catppuccin_window_default_color $tmux_un_active_color # text color
set -g @catppuccin_window_default_background "white"
set -g @catppuccin_status_background "black"
set -g @catppuccin_window_default_text "#W" # use "#W" for application instead of directory
set -g @catppuccin_window_current_text "#W" # use "#W" for application instead of directory
set -g @catppuccin_status_left_separator " "
set -g @catppuccin_status_right_separator ""
set -g @catppuccin_status_fill "all"
set -g @catppuccin_status_connect_separator "no"
set -g @catppuccin_status_modules_right "session date_time"
set -g @catppuccin_date_time_color $tmux_active_color
set -g @catppuccin_date_time_text "%Y-%m-%d %H:%M:%S"
set -g @catppuccin_pane_border_style "fg=${tmux_un_active_color}" 
set -g @catppuccin_pane_active_border_style "fg=${tmux_active_color}" 
set -g @catppuccin_status_default "on" # defaults to "on"
set -g @catppuccin_pane_status_enabled "yes"
set -g @catppuccin_pane_border_status "top"
set -g @catppuccin_pane_left_separator ""
set -g @catppuccin_pane_right_separator ""
set -g @catppuccin_pane_middle_separator " "
set -g @catppuccin_pane_default_fill "all"
set -g @catppuccin_pane_default_text "#{b:pane_current_path}"
set -g @catppuccin_pane_active_border_style "fg=$tmux_active_color"
set -g @catppuccin_pane_color "$tmux_active_color"
set -g @catppuccin_pane_background_color "black"


# vim/tmux窗口切换
set -g @plugin 'christoomey/vim-tmux-navigator'
# 初始化 TPM 插件管理器 (放在配置文件的最后)
run '~/.tmux/plugins/tpm/tpm'

# -----------------------------------------------------------------------------
# 结束
# -----------------------------------------------------------------------------
